<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Entrego Filename Concatenator</title>
    
    <link rel="icon" type="image/png" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNTMyIDE1MzIiIHdpZHRoPSIxMjgwIiBoZWlnaHQ9IjEyODAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwOSw2MDUpIiBkPSJtMCAwaDQyMGwxMyAyIDEyIDUgOSA2IDggOCA2IDEwIDUgMTUgMyAxOSAxIDExdjE5bC0zIDI0LTUgMTctOCAxNC04IDgtOCA1LTE0IDUtMTkgMi00MDIgMS0zOSAzLTI5IDUtMjMgNi0xOCA4LTE2IDEwLTEyIDExLTYgOS00IDktMSA5LTEgMTMyaDc0NGwyNSAxIDE3IDQgMTEgNiA3IDYgNyAxMCA2IDEzIDQgMTggMiAyMHYxNmwtMyAyNi00IDE1LTYgMTItOSAxMC04IDYtMTMgNS0xNyAzLTc2MiAxdjEyMGwyIDEwIDUgMTAgNyA4IDE0IDExIDE2IDkgMTQgNiAyMSA2IDIwIDQgMjQgMyAxNSAxIDM2IDFoNTQxbDQ0IDEgMTQgMiAxNCA1IDExIDggNiA3IDggMTYgNCAxNiAyIDE2djMwbC0zIDIxLTUgMTUtNSAxMC0xMSAxMi04IDUtMyAxLTExIDFoLTY4NWwtMjktMi0zMy01LTI4LTYtMzEtOS0yNS05LTIyLTEwLTE4LTEwLTE2LTExLTExLTktMTQtMTItMTMtMTQtMTItMTYtMTItMjAtOS0yMC03LTIyLTQtMTktMi0xNi0xLTE0di00NDlsMy0yOSA1LTIyIDctMjEgMTEtMjMgMTEtMTcgMTAtMTMgOS0xMCA1LTYgOC03IDE1LTEyIDE1LTEwIDE2LTkgMTYtOCAyOC0xMSAyNi04IDM0LTggNDItNyAzNy00eiIgZmlsbD0iI0VCNzgyNCIvPgo8cGF0aCB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3MDksMzEpIiBkPSJtMCAwaDM5bDI5IDQgMTcgNCAxNiA1IDE2IDYgMTkgOSAyMSAxMyAxNyAxMyAxMiAxMSAxMCA5IDcgOCAxMSAxMyAxMiAxNyAxMSAxOSA5IDE5IDcgMTkgNiAyMyAzIDE4IDIgMjJ2MjRsLTMgMjgtNiAyNy03IDIwLTkgMjEtMTMgMjMtMTAgMTQtMTMgMTYtOSAxMC05IDktMTEgOS0xMyAxMC0xOSAxMi0xNyA5LTI1IDEwLTI0IDctMjEgNC0yNyAzaC0xOWwtMjAtMi0xOS0zLTIwLTUtMjMtOC0yOS0xNC0xNi0xMC0xNi0xMi0xNC0xMi0xNS0xNS05LTExLTEyLTE2LTEyLTIwLTgtMTYtNi0xNC03LTIxLTYtMjctMi0xN3YtNDRsMy0yMSA1LTIyIDgtMjQgMTAtMjIgOC0xNCAxMC0xNSAxMC0xMyAxMS0xMyAxNy0xNyAxMS05IDE4LTEzIDIxLTEyIDE3LTggMTktNyAyMy02IDE2LTN6IiBmaWxsPSIjRUI3ODI0Ii8+Cjwvc3ZnPgo=">
    
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
      }

      label {
        display: block;
        margin-bottom: 5px;
      }
      
      
      button {
        margin-top: 10px;
        padding: 10px 20px;
        min-width: 200px;
        font-size: 16px;
        cursor: pointer;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
      }

      button:hover {
        box-shadow: inset 0 0 100px 100px rgba(0, 0, 0, 0.2);
      }

      #clearFields:hover {
        box-shadow: inset 0 0 100px 100px rgba(0, 0, 0, 0.2);
      }

      #clearFields{
        position: absolute; 
        bottom: 20px; 
        right: 20px; 
        background-color:#f44336;
      }

      .converted-date {
        margin-bottom: 5px;
      }
      
      .result-container {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
        margin-top: 10px;
        margin-left: 5%;
      }

      .result-container p {
        margin: 0;
        margin-right: 10px;
        padding-left: 5%;
      }

      .result-container button {
        margin-left: 10px;
      }

      .container {
        display: flex;
        justify-content: space-between;
        margin: auto;
        width: 90%;
        padding: 10px;
        background: white;
        border-radius: 5px;
        box-shadow: 0 0 30px 10px rgba(0, 0, 0, 0.1);
        position: relative;
      }

      .column {
        width: 48%; /* Adjust width as needed */
        background: white;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        
      }
      input, select, label {
        display: block;
        width: calc(100% - 22px);
        margin-bottom: 5px;
        padding: 10px;
        box-sizing: border-box;
      }

      h1 {
        font-size: 24px;
        margin-bottom: 20px;
        text-align: center;
      }

      .form-column {
        flex: 1;
        margin: 0 10px;
      }

      .input-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      input, select {
        padding: 10px;
        width: 100%;
        box-sizing: border-box;
      }

      #result,
      #result2 {
        text-transform: uppercase;
      }
      .required-field {
        position: relative;
      }

      .required-field .asterisk {
        color: red;
        position: absolute;
        right: 20px;
        top: 50%;
        transform: translateY(-50%);
      }

    </style>
  </head>

  <body>
    <div class="container">
      <div class="form-column">
          <h1>Entrego Filename Concatenator</h1>
          <div class="input-group">
              <select id="range" onchange="concatenateStrings()">
                  <option value="3 APVs">UP TO THREE APVs</option>
                  <option value="Multiple">MULTIPLE APVs (RANGE)</option>
              </select>
              <input type="text" id="name" placeholder="Enter Name" oninput="concatenateStrings()">
              <input type="text" id="code1" placeholder="Enter APV #1" oninput="concatenateStrings()">
              <input type="text" id="code2" placeholder="Enter APV #2" oninput="concatenateStrings()">
              <input type="text" id="code3" placeholder="Enter APV #3" oninput="concatenateStrings()">
              <input type="text" id="orNumber" placeholder="Enter OR#" oninput="concatenateStrings()">
              <div class="required-field">
                  <select id="dropdown" onchange="concatenateStrings()" required>
                      <option value="">Select Entrego Entity</option>
                      <option value="ENT">EFSI</option>
                      <option value="EEC">EEC</option>
                      <option value="ELC">ELC</option>
                  </select>
                  <span class="asterisk">*</span>
              </div>
          </div>
      </div>
      
      <div class="form-column">
          <h1>APV Date Converter</h1>
          <div class="input-group">
              
              <input type="text" id="rawDate1" name="rawDate1" placeholder="e.g., 1/1/2024" oninput="concatenateStrings()"/>
             
              <input type="text" id="rawDate2" name="rawDate2" placeholder="e.g., 2/5/2023" oninput="concatenateStrings()"/>
              
              <input type="text" id="rawDate3" name="rawDate3" placeholder="e.g., 3/8/2022" oninput="concatenateStrings()"/>
             
              <input type="text" id="rawDate4" name="rawDate4" placeholder="e.g., 4/12/2021" oninput="concatenateStrings()"/>
             
              <input type="text" id="rawDate5" name="rawDate5" placeholder="e.g., 5/16/2020" oninput="concatenateStrings()"/>

          </div>
      </div>
      <button id="clearFields" onclick="clearFields()">Clear Fields</button> 
    </div>

    <div class="result-container"> 
        <button onclick="copyToClipboard1()">Copy OR Name</button>
        <p id="result"></p>
      </div>
      <div class="result-container">
        <button onclick="copyToClipboard2()">Copy 2307 Name</button>
        <p id="result2"></p>
      </div>
    </div>

    
    <script>
      document.getElementById('range').addEventListener('change', function() {
        toggleCode3Visibility();
        concatenateStrings(); // Recalculate concatenated strings when dropdown value changes
      });

      function toggleCode3Visibility() {
        const rangeValue = document.getElementById('range').value;
        const code3Field = document.getElementById('code3');
        
        // Hide or show code3 based on rangeValue
        if (rangeValue === 'Multiple') {
          code3Field.style.display = 'none';
          document.getElementById('code3').value = '';
        } else {
          code3Field.style.display = 'block';
        }
      }

      function convertDate(rawDate) {
          // Split the date into parts
          var parts = rawDate.split("/");

          // Check if the date format is valid
          if (parts.length !== 3) {
            return "";
          }

          // Extract last 2 digits of the year
          var lastTwoDigitsOfYear = parts[2].slice(-2);
          // Format the date
          return parts[0] + "." + parts[1] + "." + lastTwoDigitsOfYear;
      }

      function concatenateStrings() {
            const name = document.getElementById('name').value;
            const code1 = document.getElementById('code1').value;
            const code2 = document.getElementById('code2').value;
            const code3 = document.getElementById('code3').value;
            let orNumber = document.getElementById('orNumber').value;
            const dropdownValue = document.getElementById('dropdown').value;
            const rangeValue = document.getElementById('range').value;

            orNumber = orNumber.replace(/\bSCANNED\b/g, '').trim();

            // Determine the concatenation for codes based on the range value
              let codes;
              if (rangeValue === "Multiple") {
                codes = code2 ? `${code1} TO ${code2}` : code1;
              } else if (rangeValue === "3 APVs") {
                codes = code2 ? `${code1} ${code2} ${code3}` : code1;
              } else {
                codes = code1;
              }
            // // Check if code2 has a value
            // const codes = code2 ? `${code1} TO ${code2}` : code1;

            const dateInputs = [
              document.getElementById('rawDate1').value,
              document.getElementById('rawDate2').value,
              document.getElementById('rawDate3').value,
              document.getElementById('rawDate4').value,
              document.getElementById('rawDate5').value
            ];
            const convertedDates = dateInputs.map(date => convertDate(date)).filter(date => date !== '');
            
            // Construct the result string
            const result = `${name} ${codes} ${orNumber} APV DATE ${convertedDates.join(' & ')} ${dropdownValue}`;
            const result2 = `2307_${name} ${codes}`;
            // Debugging - Log the result to the console
            console.log("Concatenated Result: " + result);

            // Display the result in the p element
            document.getElementById('result').innerText = result;

            // Display the result in the p element
            document.getElementById('result2').innerText = result2;
        }
        function clearFields() {
            document.getElementById('name').value = '';
            document.getElementById('code1').value = '';
            document.getElementById('code2').value = '';
            document.getElementById('code3').value = '';
            document.getElementById('orNumber').value = '';
            document.getElementById('result').innerText = '';
            document.getElementById('result2').innerText = '';
            document.getElementById('rawDate1').value = '';
            document.getElementById('rawDate2').value = '';
            document.getElementById('rawDate3').value = '';
            document.getElementById('rawDate4').value = '';
            document.getElementById('rawDate5').value = '';
        }
    
        function copyToClipboard1() {
            // Get the dropdown value
            const dropdownValue = document.getElementById('dropdown').value;

            // Check if the dropdown value is not blank
            if (dropdownValue.trim() === '') {
              // If blank, do not copy to clipboard and optionally show a notification
              showNotificationerror('Please select Entrego Entity from the dropdown before copying.');
              return;
            }

            // Get the result text
            const resultText = document.getElementById('result').innerText;

            // Create a temporary textarea to copy the text
            const textarea = document.createElement('textarea');
            textarea.value = resultText;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            // Alert the user that the text has been copied
            showNotification('Result copied to clipboard!');
          }

        function copyToClipboard2() {
            // Get the dropdown value
            const dropdownValue = document.getElementById('dropdown').value;

            // Get the result text
            const resultText = document.getElementById('result2').innerText;

            // Create a temporary textarea to copy the text
            const textarea = document.createElement('textarea');
            textarea.value = resultText;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            // Alert the user that the text has been copied
            showNotification('Result copied to clipboard!');
          }

        function showNotification(message) {
          // Create a notification element if it doesn't already exist
          let notification = document.getElementById('notification');
          if (!notification) {
            notification = document.createElement('div');
            notification.id = 'notification';
            notification.style.position = 'fixed';
            notification.style.bottom = '10px';
            notification.style.right = '10px';
            notification.style.backgroundColor = '#28a745';
            notification.style.color = '#fff';
            notification.style.padding = '10px';
            notification.style.borderRadius = '5px';
            notification.style.zIndex = '1000';
            document.body.appendChild(notification);
          }
          notification.innerText = message;

          // Hide the notification after 2 seconds
          setTimeout(() => {
              if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
              }
            }, 1500);
        }
        function showNotificationerror(message) {
          // Create a notification element if it doesn't already exist
          let notification = document.getElementById('notification');
          if (!notification) {
            notification = document.createElement('div');
            notification.id = 'notification';
            notification.style.position = 'fixed';
            notification.style.bottom = '10px';
            notification.style.right = '10px';
            notification.style.backgroundColor = 'red';
            notification.style.color = '#fff';
            notification.style.padding = '10px';
            notification.style.borderRadius = '5px';
            notification.style.zIndex = '1000';
            document.body.appendChild(notification);
          }
          notification.innerText = message;

          setTimeout(() => {
              if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
              }
            }, 1500);
          }
    </script>
  </body>
</html>
